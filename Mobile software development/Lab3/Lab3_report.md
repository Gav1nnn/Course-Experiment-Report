# 2025年夏季《移动软件开发》实验报告



<center>姓名：张家玮  学号：23020007157</center>

| 姓名和学号？         | 张家玮，23020007157                  |
| -------------------- | -------------------------------- |
| 本实验属于哪门课程？ | 中国海洋大学25夏《移动软件开发》 |
| 实验名称？           | 实验3：微信小程序云开发          |
| 博客地址？           | XXXXXXX                          |
| Github仓库地址？     | https://github.com/Gav1nnn/Course-Experiment-Report |

（备注：将实验报告发布在博客、代码公开至 github 是 **加分项**，不是必须做的）

## 一、实验目标

- 学习微信小程序 云开发的基本概念，包括数据库、云函数和存储等功能。

- 学习通过 云开发数据库实现文本搜索，掌握小程序前端与云数据库的交互方法。


- 理解云开发与传统本地 API 的区别，能够在小程序中完成一个简单的搜索功能。


## 二、实验步骤

1. 从指定[仓库](https://gitee.com/xxwan/garbage-sorting-applet)中下载对应的代码，创建项目将所有的代码拖进去，得到初始的项目。

2. 注册百度智能云，创建对应的图像识别的应用，记录应用API KEY 和 SECRET KEY

3. 初始化项目：

   - 使用开发者工具创建一个云开发环境，并复制ID。

   - ```javascript
     App({
       onLaunch() {
         wx.cloud.init({
           env: 'your-env-id', // 替换为你的云环境ID
           traceUser: true
         })
       }
     })
     ```

     在app.js中启用环境

   - 在project.config.json中配置对应百度API KEY \ SECRET 和 小程序appid, 云环境ID

4. 部署云函数：

   - 点击`cloudfuntions`文件夹展开子文件夹
   - 依次右键点击展开的子文件夹并点击弹出的`上传并部署(不上传node_modules)`

5. 部署云数据库“

   - 点击小程序开发工具的`云开发`
   - 点击`数据库`
   - 创建集合`trash`, `type`
   - 依次导入`trash.json`, `type.json`文件

至此部署完成。

## 三、程序运行结果

程序主界面如下：

<img src="/Users/zhanggavin/Pictures/Screenshot/截屏2025-09-01 18.47.12.png" alt="截屏2025-09-01 18.47.12" style="zoom:50%;" />

点击搜索对应的物品：

<img src="/Users/zhanggavin/Pictures/Screenshot/截屏2025-09-01 18.47.38.png" alt="截屏2025-09-01 18.47.38" style="zoom:50%;" />

可以看到查询结果，云函数及云数据库运行正常：

<img src="/Users/zhanggavin/Pictures/Screenshot/截屏2025-09-01 18.47.50.png" alt="截屏2025-09-01 18.47.50" style="zoom:50%;" />

## 四、问题总结与体会

**遇到的问题**

- 一开始数据库查询为空，排查后发现是没有在云环境中创建集合。
- 正则搜索时大小写不敏感的写法不熟悉，后来查阅文档后用 `options: 'i'` 解决。
- 云环境 ID 忘记替换，导致无法初始化，修改后恢复正常。

**解决方法**

- 查阅微信开发者官方文档。
- 利用控制台调试 `console.log` 输出，逐步排查错误。
- 请教同学，确认数据库集合名称必须与代码一致。

**收获与体会**

- 熟悉了小程序 **云开发数据库** 的基本用法。
- 学会了使用 **正则表达式** 进行模糊查询。
- 理解了云开发的便利性，不需要搭建服务器即可实现后端功能。

**课程建议**

- 希望实验报告中增加更多云开发案例（如云函数调用）。
- 文档中能给出更多常见错误排查方式，便于同学们快速解决问题。
